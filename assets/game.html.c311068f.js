import{_ as p,o,c,b as n,e as s,a as t,d as e,r as l}from"./app.b34d8c3b.js";const i={},u=e('<h1 id="game" tabindex="-1"><a class="header-anchor" href="#game" aria-hidden="true">#</a> Game</h1><h2 id="\u63D0\u793A" tabindex="-1"><a class="header-anchor" href="#\u63D0\u793A" aria-hidden="true">#</a> \u63D0\u793A</h2><ul><li>2022/9/22 \u6E38\u620F\u5F15\u64CE\u8BF4\u660E</li></ul><h2 id="\u6280\u672F" tabindex="-1"><a class="header-anchor" href="#\u6280\u672F" aria-hidden="true">#</a> \u6280\u672F</h2><h3 id="\u5E27\u540C\u6B65" tabindex="-1"><a class="header-anchor" href="#\u5E27\u540C\u6B65" aria-hidden="true">#</a> \u5E27\u540C\u6B65</h3>',5),k={href:"https://zhuanlan.zhihu.com/p/36884005",target:"_blank",rel:"noopener noreferrer"},r=e('<h2 id="\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#\u4ECB\u7ECD" aria-hidden="true">#</a> \u4ECB\u7ECD</h2><ul><li>\u6700\u65E9\u63A5\u89E6\u7684\u6E38\u620F\u542F\u8499\u5DE6\u53F3\u5E74\u4EFD\u9636\u6BB5</li><li>2009</li></ul><h2 id="\u6E38\u620F\u5F15\u64CE" tabindex="-1"><a class="header-anchor" href="#\u6E38\u620F\u5F15\u64CE" aria-hidden="true">#</a> \u6E38\u620F\u5F15\u64CE</h2><ul><li>2021/6/</li></ul><h3 id="godot" tabindex="-1"><a class="header-anchor" href="#godot" aria-hidden="true">#</a> Godot</h3>',5),d={href:"https://github.com/godotengine/godot",target:"_blank",rel:"noopener noreferrer"},m={href:"https://docs.godotengine.org/zh_CN/stable/index.html",target:"_blank",rel:"noopener noreferrer"},v=n("h3",{id:"unity",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#unity","aria-hidden":"true"},"#"),s(" Unity")],-1),b={href:"https://unity.cn/",target:"_blank",rel:"noopener noreferrer"},h=n("h3",{id:"cocos",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#cocos","aria-hidden":"true"},"#"),s(" Cocos")],-1),y={href:"https://www.cocos.com/",target:"_blank",rel:"noopener noreferrer"},w=n("h2",{id:"\u6E38\u620F\u7D20\u6750",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u6E38\u620F\u7D20\u6750","aria-hidden":"true"},"#"),s(" \u6E38\u620F\u7D20\u6750")],-1),g=n("ul",null,[n("li",null,"\u641C\u96C6\u4E00\u4E9B\u6E38\u620F\u7D20\u6750\u7F51\u7AD9")],-1),f=n("h3",{id:"\u97F3\u6548",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u97F3\u6548","aria-hidden":"true"},"#"),s(" \u97F3\u6548")],-1),_={href:"https://www.bensound.com/",target:"_blank",rel:"noopener noreferrer"},C={href:"https://www.tosound.com/",target:"_blank",rel:"noopener noreferrer"},x=n("h3",{id:"logo",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#logo","aria-hidden":"true"},"#"),s(" Logo")],-1),S=n("li",null,"\u56FD\u5916",-1),E={href:"https://www.shopify.com/zh/tools/logo-maker",target:"_blank",rel:"noopener noreferrer"},M=n("li",null,"\u56FD\u5185",-1),G={href:"https://ailogo.qq.com/",target:"_blank",rel:"noopener noreferrer"},O=n("h3",{id:"\u56FD\u5916",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u56FD\u5916","aria-hidden":"true"},"#"),s(" \u56FD\u5916")],-1),A=n("li",null,"\u901A\u7528\u7D20\u6750",-1),q={href:"https://craftpix.net/",target:"_blank",rel:"noopener noreferrer"},I={href:"https://itch.io/",target:"_blank",rel:"noopener noreferrer"},z={href:"https://game-icons.net/",target:"_blank",rel:"noopener noreferrer"},H={href:"https://opengameart.org/",target:"_blank",rel:"noopener noreferrer"},B={href:"https://unityassets4free.com/",target:"_blank",rel:"noopener noreferrer"},D={href:"https://www.gamedevmarket.net/",target:"_blank",rel:"noopener noreferrer"},j={href:"https://assetstore.unity.com/?locale=zh_CN&force=true",target:"_blank",rel:"noopener noreferrer"},P=n("li",null,"NES",-1),N={href:"https://www.spriters-resource.com/nes/",target:"_blank",rel:"noopener noreferrer"},U={href:"https://spritedatabase.net/",target:"_blank",rel:"noopener noreferrer"},L=n("h3",{id:"\u56FD\u5185",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u56FD\u5185","aria-hidden":"true"},"#"),s(" \u56FD\u5185")],-1),W={href:"https://www.aplaybox.com/u/680828836/model",target:"_blank",rel:"noopener noreferrer"},F=n("h2",{id:"\u51C6\u5907\u4F7F\u7528\u7684\u7D20\u6750",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u51C6\u5907\u4F7F\u7528\u7684\u7D20\u6750","aria-hidden":"true"},"#"),s(" \u51C6\u5907\u4F7F\u7528\u7684\u7D20\u6750")],-1),T={href:"https://pzuh.itch.io/ninja-girl-free-sprites",target:"_blank",rel:"noopener noreferrer"},R=n("h2",{id:"\u6E38\u620F\u670D\u52A1\u5668\u6846\u67B6",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u6E38\u620F\u670D\u52A1\u5668\u6846\u67B6","aria-hidden":"true"},"#"),s(" \u6E38\u620F\u670D\u52A1\u5668\u6846\u67B6")],-1),V={href:"https://www.yuque.com/iohao/game/wwvg7z",target:"_blank",rel:"noopener noreferrer"},K={href:"https://www.jianshu.com/p/4d3de45f27b1",target:"_blank",rel:"noopener noreferrer"},Q=e(`<h3 id="iogameunity" tabindex="-1"><a class="header-anchor" href="#iogameunity" aria-hidden="true">#</a> IoGameUnity</h3><ul><li>WebSocket</li></ul><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Google<span class="token punctuation">.</span>Protobuf</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>SceneManagement</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityWebSocket</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">&gt;</span></span></span>
<span class="token doc-comment comment">/// socket\u53EF\u4EE5\u548C ExternalMessage \u7C7B\u8FDB\u884C\u6346\u7ED1\u4F7F\u7528</span>
<span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">&gt;</span></span></span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SocketClient</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span><span class="token punctuation">{</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Header</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;\u9000\u51FA\u6E38\u620F\u9762\u677F&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token class-name">GameObject</span> quitGamePanel<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SocketClient</span> v<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name"><span class="token keyword">string</span></span> address <span class="token operator">=</span> <span class="token string">&quot;ws://192.168.1.3:10100/websocket&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">WebSocket</span> socket<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">Destroy</span><span class="token punctuation">(</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        v <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token function">Connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">DontDestroyOnLoad</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6CE8\u518C\u51FD\u6570 </span>
        <span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">StartCoroutine</span><span class="token punctuation">(</span><span class="token function">TryConnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//\u6CE8\u518C\u56DE\u8C03</span>
        UserAction<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ChatAction<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        GameAction<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        HeroAction<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token return-type class-name">IEnumerator</span> <span class="token function">TryConnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//\u5C1D\u8BD5\u91CD\u65B0\u94FE\u63A5</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">yield</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WaitForSeconds</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>socket<span class="token punctuation">.</span>ReadyState <span class="token operator">!=</span> WebSocketState<span class="token punctuation">.</span>Open<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">Connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">QuitGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        socket<span class="token punctuation">.</span><span class="token function">CloseAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Application<span class="token punctuation">.</span><span class="token function">Quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Input<span class="token punctuation">.</span><span class="token function">GetKeyDown</span><span class="token punctuation">(</span>KeyCode<span class="token punctuation">.</span>Escape<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            quitGamePanel<span class="token punctuation">.</span><span class="token function">SetActive</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            AnimationUtil<span class="token punctuation">.</span><span class="token function">DoScaleAnim</span><span class="token punctuation">(</span>quitGamePanel<span class="token punctuation">.</span>transform<span class="token punctuation">.</span><span class="token function">GetChild</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnError</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">ErrorEventArgs</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//\u5F02\u5E38\u56DE\u8C03</span>

    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnMessage</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">MessageEventArgs</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//\u6D88\u606F\u56DE\u8C03</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>IsBinary<span class="token punctuation">)</span><span class="token punctuation">{</span>
            HandleManager<span class="token punctuation">.</span><span class="token function">ParseMessage</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>RawData<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnClose</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">CloseEventArgs</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//\u5173\u95ED\u56DE\u8C03</span>

    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnOpen</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">OpenEventArgs</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//\u6253\u5F00\u56DE\u8C03</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;\u94FE\u63A5\u670D\u52A1\u5668\u6210\u529F\uFF01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/** m\u91CC\u9762\u505A\u4E86null\u5224\u65AD */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Send</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> cmd<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> subCmd<span class="token punctuation">,</span> <span class="token class-name">IMessage</span> m <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//\u53D1\u9001\u6570\u636E</span>
        socket<span class="token punctuation">.</span><span class="token function">SendAsync</span><span class="token punctuation">(</span>HandleManager<span class="token punctuation">.</span><span class="token function">BuildMessage</span><span class="token punctuation">(</span>cmd<span class="token punctuation">,</span> subCmd<span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WebSocket</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u6CE8\u518C\u56DE\u8C03</span>
        socket<span class="token punctuation">.</span>OnOpen <span class="token operator">+=</span> OnOpen<span class="token punctuation">;</span>
        socket<span class="token punctuation">.</span>OnClose <span class="token operator">+=</span> OnClose<span class="token punctuation">;</span>
        socket<span class="token punctuation">.</span>OnMessage <span class="token operator">+=</span> OnMessage<span class="token punctuation">;</span>
        socket<span class="token punctuation">.</span>OnError <span class="token operator">+=</span> OnError<span class="token punctuation">;</span>
        socket<span class="token punctuation">.</span><span class="token function">ConnectAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>HandleManager</li></ul><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span>CompilerServices</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Google<span class="token punctuation">.</span>Protobuf</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">&gt;</span></span></span>
<span class="token doc-comment comment">/// \u4E00\u4E2A\u901A\u7528\u9879\u76EE\u5BF9\u8C61\uFF0C</span>
<span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">&gt;</span></span></span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">HandleManager</span><span class="token punctuation">{</span> <span class="token comment">//\u56DE\u8C03\u5904\u7406</span>
    <span class="token comment">//---------------------------\u53D1\u9001\u5904\u7406</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">Dictionary<span class="token punctuation">&lt;</span> <span class="token keyword">int</span> <span class="token punctuation">,</span>  EventHandler<span class="token punctuation">&lt;</span>Execute<span class="token punctuation">&gt;</span> <span class="token punctuation">&gt;</span></span> handlers <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span>  <span class="token keyword">class</span> <span class="token class-name">Execute</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">EventArgs</span></span><span class="token punctuation">{</span>    <span class="token comment">// \u4E8B\u4EF6\u53C2\u6570</span>
        <span class="token comment">/** \u72B6\u6001\u7801 */</span>
        <span class="token keyword">public</span> <span class="token keyword">readonly</span> <span class="token class-name"><span class="token keyword">int</span></span> responseStatus<span class="token punctuation">;</span>
        <span class="token comment">/** \u8FD4\u56DE\u6570\u636E */</span>
        <span class="token keyword">public</span> <span class="token keyword">readonly</span> <span class="token class-name">ByteString</span> data<span class="token punctuation">;</span>
        <span class="token keyword">internal</span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token class-name">ByteString</span> data<span class="token punctuation">,</span><span class="token class-name"><span class="token keyword">int</span></span> responseStatus<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>responseStatus <span class="token operator">=</span> responseStatus<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">AddHandler</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> cmd<span class="token punctuation">,</span><span class="token class-name"><span class="token keyword">int</span></span> subCmd<span class="token punctuation">,</span>  <span class="token class-name">EventHandler<span class="token punctuation">&lt;</span>Execute<span class="token punctuation">&gt;</span></span> IHandler<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// \u6CE8\u518C\u56DE\u8C03</span>
        handlers<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token function">GetMergeCmd</span><span class="token punctuation">(</span>cmd<span class="token punctuation">,</span>subCmd<span class="token punctuation">)</span><span class="token punctuation">,</span>IHandler<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">PackageHandler</span><span class="token punctuation">(</span> <span class="token class-name"><span class="token keyword">int</span></span> mergeCmd<span class="token punctuation">,</span> <span class="token class-name">ExternalMessage</span> data <span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//\u5206\u53D1\u6D88\u606F</span>
        <span class="token keyword">try</span><span class="token punctuation">{</span>
            <span class="token class-name">EventHandler<span class="token punctuation">&lt;</span>Execute<span class="token punctuation">&gt;</span></span> handler <span class="token operator">=</span> handlers<span class="token punctuation">[</span>mergeCmd<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//\u5BF9\u4E8E\u8DEF\u7531\u4E0D\u5B58\u5728\u7684\u9519\u8BEF\u5904\u7406</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>handler <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> handler<span class="token punctuation">.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>handler<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Execute</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>DataContent<span class="token punctuation">,</span>data<span class="token punctuation">.</span>ResponseStatus<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;\u4E0D\u5B58\u5728\u7684\u8DEF\u7531: &quot;</span><span class="token operator">+</span><span class="token function">GetCmd</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>CmdMerge<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;-&quot;</span><span class="token operator">+</span><span class="token function">GetSubCmd</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>CmdMerge<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">throw</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ParseMessage</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> bytes<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//\u89E3\u6790\u6D88\u606F</span>
        <span class="token class-name">ExternalMessage</span> message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ExternalMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        message<span class="token punctuation">.</span><span class="token function">MergeFrom</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Debug.Log(message);</span>
        <span class="token function">PackageHandler</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>CmdMerge<span class="token punctuation">,</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//---------------------------\u8DEF\u7531\u547D\u4EE4\u5904\u7406</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">GetCmd</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> merge<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//\u83B7\u53D6cmd</span>
        <span class="token keyword">return</span> merge <span class="token operator">&gt;&gt;</span> <span class="token number">16</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">GetSubCmd</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> merge<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//\u83B7\u53D6subCmd</span>
        <span class="token keyword">return</span> merge <span class="token operator">&amp;</span> <span class="token number">0xFFFF</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">GetMergeCmd</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> cmd<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> subCmd<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//\u83B7\u53D6mergeCmd</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>cmd <span class="token operator">&lt;&lt;</span> <span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">+</span> subCmd<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//---------------------------\u5C01\u88C5\u53D1\u9001\u7ED3\u679C\u5904\u7406</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token function">BuildMessage</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> cmd<span class="token punctuation">,</span><span class="token class-name"><span class="token keyword">int</span></span> subCmd<span class="token punctuation">,</span><span class="token class-name">IMessage</span> v <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// \u5C01\u88C5\u6D88\u606F\u53D1\u9001</span>
        <span class="token class-name">ByteString</span> data <span class="token operator">=</span> ByteString<span class="token punctuation">.</span>Empty<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            data <span class="token operator">=</span> v<span class="token punctuation">.</span><span class="token function">ToByteString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name"><span class="token keyword">var</span></span> message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ExternalMessage</span><span class="token punctuation">{</span>
            CmdMerge <span class="token operator">=</span> <span class="token function">GetMergeCmd</span><span class="token punctuation">(</span>cmd<span class="token punctuation">,</span> subCmd<span class="token punctuation">)</span><span class="token punctuation">,</span>
            DataContent <span class="token operator">=</span> data<span class="token punctuation">,</span>
            ProtocolSwitch <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
            CmdCode <span class="token operator">=</span> <span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">ToByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5);function J(X,Y){const a=l("ExternalLinkIcon");return o(),c("div",null,[u,n("ul",null,[n("li",null,[n("a",k,[s("https://zhuanlan.zhihu.com/p/36884005"),t(a)])])]),r,n("ul",null,[n("li",null,[n("a",d,[s("https://github.com/godotengine/godot"),t(a)])]),n("li",null,[n("a",m,[s("https://docs.godotengine.org/zh_CN/stable/index.html"),t(a)])])]),v,n("ul",null,[n("li",null,[n("a",b,[s("https://unity.cn/"),t(a)])])]),h,n("ul",null,[n("li",null,[n("a",y,[s("https://www.cocos.com/"),t(a)])])]),w,g,f,n("ul",null,[n("li",null,[n("a",_,[s("https://www.bensound.com/"),t(a)])]),n("li",null,[n("a",C,[s("https://www.tosound.com/"),t(a)])])]),x,n("ul",null,[S,n("li",null,[n("a",E,[s("https://www.shopify.com/zh/tools/logo-maker"),t(a)])]),M,n("li",null,[n("a",G,[s("https://ailogo.qq.com/"),t(a)])])]),O,n("ul",null,[A,n("li",null,[n("a",q,[s("https://craftpix.net/"),t(a)])]),n("li",null,[n("a",I,[s("https://itch.io/"),t(a)])]),n("li",null,[n("a",z,[s("https://game-icons.net/"),t(a)])]),n("li",null,[n("a",H,[s("https://opengameart.org/"),t(a)])]),n("li",null,[n("a",B,[s("https://unityassets4free.com/"),t(a)])]),n("li",null,[n("a",D,[s("https://www.gamedevmarket.net/"),t(a)])]),n("li",null,[n("a",j,[s("https://assetstore.unity.com/?locale=zh_CN&force=true"),t(a)])]),P,n("li",null,[n("a",N,[s("https://www.spriters-resource.com/nes/"),t(a)])]),n("li",null,[n("a",U,[s("https://spritedatabase.net/"),t(a)])])]),L,n("ul",null,[n("li",null,[s("\u539F\u795E\u6A21\u578B: "),n("a",W,[s("https://www.aplaybox.com/u/680828836/model"),t(a)])])]),F,n("ul",null,[n("li",null,[n("a",T,[s("https://pzuh.itch.io/ninja-girl-free-sprites"),t(a)])])]),R,n("ul",null,[n("li",null,[n("a",V,[s("https://www.yuque.com/iohao/game/wwvg7z"),t(a)])]),n("li",null,[n("a",K,[s("https://www.jianshu.com/p/4d3de45f27b1"),t(a)])])]),Q])}const $=p(i,[["render",J],["__file","game.html.vue"]]);export{$ as default};
